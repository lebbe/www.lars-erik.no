---
import '../styles/global.css'
import Section from '../components/section/Section.astro'
import Toppings from '../components/Toppings.astro'

// Read articles.md as raw text
const articlesRaw = await Astro.glob('../index/sections/articles.md')
const articlesContent = await articlesRaw[0].compiledContent()

// Split by separator and take first 3 entries
const allArticles = articlesContent.split('<hr>')
const featuredArticles = allArticles.slice(0, 3).join('<hr>')
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Astro</title>
  </head>
  <body>
    <div class="editor-canvas">
      <Toppings />

      <Section
        label="Written_Content"
        columns={1}
        class="articles-area"
        heading="Artikler"
      >
        <Fragment set:html={featuredArticles} />
        <a href="/articles" class="source-link">Se alle artikler →</a>
      </Section>

      <Section label="Audio_Engine" columns={2} heading="Musikk og Lydlandskap">
        <div class="music-player-mock">
          <div class="track">
            <span>01. Submerged_Visions.mp3</span><div class="wave-mock"></div>
          </div>
          <div class="track">
            <span>02. Echoes_of_Lars.wav</span><div class="wave-mock"></div>
          </div>
          <div class="track">
            <span>03. Distant_Data_Stream.flac</span><div class="wave-mock">
            </div>
          </div>
        </div>
      </Section>

      <Section label="Nerd_Metrics" columns={1}>
        <p>Kaffeinnhold: 88%</p>
        <p>Uleste e-poster: 4 201</p>
        <p>Linjer kode skrevet i dag: 12</p>
      </Section>

      <Section label="Random_Seed" columns={1}>
        <blockquote>
          "Hvis det fungerer på første forsøk, har du gjort noe feil."
        </blockquote>
      </Section>

      <Section label="System_Status" columns={1}>
        <div class="status-indicator">
          <div class="dot pulse"></div>
          <span>Søker etter motivasjon...</span>
        </div>
      </Section>
    </div>
  </body>
</html>
