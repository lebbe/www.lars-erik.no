---
import '../styles/global.css'
import Section from '../components/section/Section.astro'
import Toppings from '../components/Toppings.astro'
import MusicPlayer from '../components/MusicPlayer.astro'
import CMSToolbar from '../components/CMSToolbar.astro'
import PortalLink from '../components/PortalLink.astro'

// Read articles.md as raw text
const articlesRaw = await Astro.glob('../index/sections/articles.md')
const articlesContent = await articlesRaw[0].compiledContent()

// Split by separator and take first 3 entries
const allArticles = articlesContent.split('<hr>')
const featuredArticles = allArticles.slice(0, 6).join('<hr>')

// Music tracks
const musicTracks = [
  {
    id: 'track1',
    title: 'Disconcerting Presence',
    audioUrl: '/audio/disconcerting_presence.mp3',
    imageUrl: '/imgs/disconcerting_presence.webp',
    description:
      'En ambient komposisjon som utforsker det urovekkende i det ukjente.',
  },
  {
    id: 'track2',
    title: 'Understrøm (feat. Sad Alien)',
    audioUrl: '/audio/understrom_lebchen_sad_alien.mp3',
    imageUrl: '/imgs/understrom.webp',
    description: "Hovedtemaet til filmen 'Understrøm', med Sad Alien på gitar.",
  },
  {
    id: 'track3',
    title: 'It Came from the MMC',
    audioUrl: '/audio/mmc.mp3',
    imageUrl: '/imgs/mmc.webp',
    description:
      'En mørk og energisk låt inspirert av retro dataspill og sci-fi/horror filmer.',
  },
]
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta
      name="description"
      content="Lars-Erik Bruce - Senior Software Engineer, filosof, elektronisk musiker og digital kunstner. Ekspert i semantisk kode, tilgjengelighet og pragmatisk webutvikling. Skaper av Synthwave-musikk og 'Small Web' entusiast."
    />
    <title>Lars-Erik Bruce</title>
  </head>
  <body>
    <CMSToolbar />
    <div class="editor-canvas">
      <Toppings />

      <main>
        <Section
          label="Written_Content"
          columns={1}
          class="articles-area"
          heading="Artikler"
        >
          <Fragment set:html={featuredArticles} />
          <a href="/articles">Se alle artikler →</a>
        </Section>

        <Section
          label="Audio_Engine"
          columns={2}
          heading="Musikk og Lydlandskap"
        >
          <MusicPlayer tracks={musicTracks} />
        </Section>

        <Section label="Digital_Portals" columns={1} heading="Mine Hjørner">
          <PortalLink
            icon="Terminal"
            href="https://lebbe.neocities.org/"
            keywords="Neocities, Small Web"
            title="Lebbes Terminal"
          >
            Mitt personlige hjørne på nettet med "Small Web" manifest og
            ASCII-spill.
          </PortalLink>
          <PortalLink
            icon="Guitar"
            href="https://lebchen.rocks/"
            keywords="Artist-side"
            title="Lebchen Rocks"
          >
            Min offisielle artist-side med Cinematic Synthwave og
            Darkwave-musikk.
          </PortalLink>
          <PortalLink
            icon="Music"
            href="https://www.youtube.com/@Lars-ErikBruce"
            keywords="YouTube"
            title="@Lars-Erik Bruce"
          >
            Mine musikkvideoer og komposisjoner.
          </PortalLink>
          <PortalLink
            icon="Blocks"
            href="https://www.instagram.com/lebocomics/"
            keywords="AFOL, Instagram"
            title="@lebocomics"
          >
            Lego-fotografering og narrative comic strips.
          </PortalLink>
          <PortalLink
            icon="Globe"
            href="https://spacehey.com/lebchen"
            keywords="SpaceHey"
            title="SpaceHey/@lebchen"
          >
            Min profil på det retro-inspirerte sosiale nettverket.
          </PortalLink>
          <PortalLink
            icon="Github"
            href="https://github.com/lebbe/"
            keywords="GitHub"
            title="@lebbe"
          >
            Open Source-prosjekter og eksperimenter.
          </PortalLink>
        </Section>

        <Section label="Friend_Links" columns={1} heading="Andres Hjørner">
          <PortalLink
            icon="Globe"
            href="https://ninthsymphony.wordpress.com/"
            keywords="Kunst og illustrasjon"
            title="Nina Flatnes Bratbak"
          >
            Min kones univers av kunst, foto og illustrasjoner.
          </PortalLink>

          <PortalLink
            icon="Globe"
            href="https://steinar.bang.priv.no/"
            keywords="Teknologiblogg"
            title="Steinar Bang"
          >
            Tidligere kollegas blogg om koding, Linux og web.
          </PortalLink>

          <PortalLink
            icon="Globe"
            href="https://www.tonedarrud.no/"
            keywords="UX-design portefølje"
            title="Tone Darrud"
          >
            Tidligere kollegas portefølje innen UX-design.
          </PortalLink>

          <PortalLink
            icon="Globe"
            href="https://01101001.net/"
            keywords="Personlig landingsside"
            title="David Oftedal"
          >
            En venns minimalistiske side om programmering.
          </PortalLink>
        </Section>

        <Section
          label="Professional_Journey"
          columns={1}
          heading="Profesjonell Erfaring"
        >
          <p>
            <strong>Senior Software Engineer @ Redpill Linpro</strong> (2022–nå)
            <br />
            Frontend-utvikling og teknisk ledelse. Fokus på Open Source-løsninger
            og moderne webarkitektur.
          </p>
          <p>
            <strong>Frontend Techlead @ Tripletex AS</strong> (2012–2022)
            <br />
            9+ år med å bygge og skalere enterprise ERP-systemer. Ledet overgangen
            fra Java-backend til moderne frontend-arkitektur.
          </p>
          <p>
            <strong>Master i Informatikk</strong> - Universitetet i Oslo (2012)
            <br />
            Spesialisering i semantisk informasjonsutvinning fra medisinske journaler
            (NLP/AI). Kombinert med studier i filosofi.
          </p>
        </Section>

        <Section
          label="Gemini_Deep_Research"
          columns={2}
          heading="Gemini Deep Research"
        >
          <p>
            Jeg bruker Geminis Deep Research-funksjonalitet for å lage
            omfattende rapporter om emner som interesserer meg. Her deler jeg
            disse funnene med verden.
          </p>
          <a href="/ai/research" class="source-link">Se rapportene →</a>
        </Section>

        <Section label="Captain_Scapegoat" columns={1}>
          <a
            href="/ai/captain_scapegoat"
            style="display: block; cursor: pointer;"
          >
            <img
              src="/media/previews/captain_scapegoat_preview.webp"
              alt="Captain Scapegoat"
              style="width: 100%; height: auto; border-radius: 4px; transition: opacity 0.3s;"
            />
          </a>
        </Section>
      </main>
    </div>
  </body>
</html>
