---
import '../styles/global.css'
import Section from '../components/section/Section.astro'
import Toppings from '../components/Toppings.astro'
import MusicPlayer from '../components/MusicPlayer.astro'

// Read articles.md as raw text
const articlesRaw = await Astro.glob('../index/sections/articles.md')
const articlesContent = await articlesRaw[0].compiledContent()

// Split by separator and take first 3 entries
const allArticles = articlesContent.split('<hr>')
const featuredArticles = allArticles.slice(0, 3).join('<hr>')

// Music tracks
const musicTracks = [
  {
    id: 'track1',
    title: 'Disconcerting Presence',
    audioUrl: '/audio/disconcerting_presence.mp3',
    imageUrl: '/imgs/disconcerting_presence.webp',
  },
  {
    id: 'track2',
    title: 'Understr√∏mg (feat. Sad Alien)',
    audioUrl: '/audio/understrom_lebchen_sad_alien.mp3',
    imageUrl: '/imgs/understrom.webp',
  },
  {
    id: 'track3',
    title: 'It Came from the MMC',
    audioUrl: '/audio/mmc.mp3',
    imageUrl: '/imgs/mmc.webp',
  },
]
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta
      name="description"
      content="Portef√∏lje for Lars-Erik Bruce - utvikler, musiker og kodeentusiast. Utforsk artikler, musikk og digitale prosjekter."
    />
    <title>Lars-Erik Bruce</title>
  </head>
  <body>
    <div class="editor-canvas">
      <Toppings />

      <main>
        <Section
          label="Written_Content"
          columns={1}
          class="articles-area"
          heading="Artikler"
        >
          <Fragment set:html={featuredArticles} />
          <a href="/articles" class="source-link">Se alle artikler ‚Üí</a>
        </Section>

        <Section
          label="Audio_Engine"
          columns={2}
          heading="Musikk og Lydlandskap"
        >
          <MusicPlayer tracks={musicTracks} />
        </Section>

        <Section
          label="Digital_Portals"
          columns={2}
          heading="Mine Andre Hj√∏rner"
        >
          <div class="portal-link">
            <span class="portal-icon">üåê</span>
            <a href="https://lebbe.neocities.org/" target="_blank"
              >Lebbes Terminal</a
            >
            <span class="portal-desc">// Min Neocities-side</span>
          </div>
          <div class="portal-link">
            <span class="portal-icon">üé∏</span>
            <a href="https://lebchen.rocks/" target="_blank">Lebchen Rocks</a>
            <span class="portal-desc">// Min artist-side</span>
          </div>
          <div class="portal-link">
            <span class="portal-icon">üéº</span>
            <a href="https://www.youtube.com/@Lars-ErikBruce" target="_blank"
              >@Lars-Erik Bruce</a
            >
            <span class="portal-desc">// Mine komposisjoner</span>
          </div>
          <div class="portal-link">
            <span class="portal-icon">üíæ</span>
            <a href="https://github.com/lebbe/" target="_blank">@lebbe</a>
            <span class="portal-desc">// Min GitHub</span>
          </div>
        </Section>

        <Section label="Nerd_Metrics" columns={1}>
          <p>Kaffeinnhold: 88%</p>
          <p>Uleste e-poster: 4 201</p>
          <p>Linjer kode skrevet i dag: 12</p>
        </Section>

        <Section label="Random_Seed" columns={1}>
          <blockquote>
            "Hvis det fungerer p√• f√∏rste fors√∏k, har du gjort noe feil."
          </blockquote>
        </Section>

        <Section label="System_Status" columns={1}>
          <div class="status-indicator">
            <div class="dot pulse"></div>
            <span>S√∏ker etter motivasjon...</span>
          </div>
        </Section>
      </main>
    </div>
  </body>
</html>
